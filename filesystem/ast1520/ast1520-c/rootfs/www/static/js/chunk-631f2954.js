(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-631f2954"],{"13d5":function(t,a,e){"use strict";var n=e("23e7"),i=e("d58f").left,r=e("a640"),o=e("2d00"),s=e("605d"),c=r("reduce"),l=!s&&o>79&&o<83;n({target:"Array",proto:!0,forced:!c||l},{reduce:function(t){return i(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"466d":function(t,a,e){"use strict";var n=e("d784"),i=e("825a"),r=e("50c4"),o=e("1d80"),s=e("8aa5"),c=e("14c3");n("match",1,(function(t,a,e){return[function(a){var e=o(this),n=void 0==a?void 0:a[t];return void 0!==n?n.call(a,e):new RegExp(a)[t](String(e))},function(t){var n=e(a,t,this);if(n.done)return n.value;var o=i(t),l=String(this);if(!o.global)return c(o,l);var m=o.unicode;o.lastIndex=0;var d,v=[],u=0;while(null!==(d=c(o,l))){var h=String(d[0]);v[u]=h,""===h&&(o.lastIndex=s(l,r(o.lastIndex),m)),u++}return 0===u?null:v}]}))},"4df4":function(t,a,e){"use strict";var n=e("0366"),i=e("7b0b"),r=e("9bdd"),o=e("e95a"),s=e("50c4"),c=e("8418"),l=e("35a1");t.exports=function(t){var a,e,m,d,v,u,h=i(t),p="function"==typeof this?this:Array,f=arguments.length,k=f>1?arguments[1]:void 0,M=void 0!==k,g=l(h),b=0;if(M&&(k=n(k,f>2?arguments[2]:void 0,2)),void 0==g||p==Array&&o(g))for(a=s(h.length),e=new p(a);a>b;b++)u=M?k(h[b],b):h[b],c(e,b,u);else for(d=g.call(h),v=d.next,e=new p;!(m=v.call(d)).done;b++)u=M?r(d,k,[m.value,b],!0):m.value,c(e,b,u);return e.length=b,e}},"63a5":function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"main-setting"},[e("div",{staticClass:"setting-model"},[e("div",{staticClass:"radio-setting"},[e("span",{staticClass:"setting-title"},[t._v("USB over IP")]),e("div",[e("radio-component",{attrs:{disabled:"1"===t.castMode,label:"km"},model:{value:t.kvmMode,callback:function(a){t.kvmMode=a},expression:"kvmMode"}},[t._v("Optimized for KVM")]),e("radio-component",{attrs:{disabled:"1"===t.castMode,label:"usb"},model:{value:t.kvmMode,callback:function(a){t.kvmMode=a},expression:"kvmMode"}},[t._v("USB Emulation")])],1)]),"km"===t.kvmMode?e("div",{staticClass:"setting"},[e("span",{staticClass:"setting-title"},[t._v("Request Time Out (sec)")]),e("el-input-number",{attrs:{"controls-position":"right",min:1,max:600,disabled:"1"===t.castMode},model:{value:t.timeout,callback:function(a){t.timeout=a},expression:"timeout"}})],1):t._e(),"km"===t.kvmMode?e("div",{staticClass:"radio-setting"},[e("span",{staticClass:"setting-title"},[t._v("Roaming Master/Slave")]),e("div",[e("radio-component",{attrs:{label:"1",disabled:"1"===t.castMode},on:{change:t.resetCoord},model:{value:t.roaming,callback:function(a){t.roaming=a},expression:"roaming"}},[t._v("Master")]),e("radio-component",{attrs:{label:"0",disabled:"1"===t.castMode},model:{value:t.roaming,callback:function(a){t.roaming=a},expression:"roaming"}},[t._v("Slave")])],1)]):t._e(),"1"===t.roaming&&"km"===t.kvmMode?e("div",{staticClass:"kvm-view"},[e("div",{staticClass:"error-input"},[t._v(" Row: "),e("el-input-number",{staticStyle:{width:"80px","margin-right":"24px"},attrs:{"controls-position":"right",max:16,min:1},on:{change:t.handleRowKvmMap},model:{value:t.row,callback:function(a){t.row=a},expression:"row"}}),t._v(" Col: "),e("el-input-number",{staticStyle:{width:"80px","margin-right":"24px"},attrs:{"controls-position":"right",max:16,min:1},on:{change:t.handleColKvmMap},model:{value:t.col,callback:function(a){t.col=a},expression:"col"}}),t.col*t.row>16?e("span",{staticClass:"alert-error",staticStyle:{top:"60px"}},[t._v("Maximum 16 Slaves")]):t._e()],1),t.col*t.row<=16?e("div",{staticClass:"kvm-layout"},t._l(t.row,(function(a,n){return e("div",{key:a},t._l(t.col,(function(i,r){return e("div",{key:i,staticClass:"kvm-child"},[e("icon-svg",{staticStyle:{margin:"0 auto",width:"60px",height:"60px",display:"block"},attrs:{"icon-class":"osd"}}),e("div",{staticStyle:{"text-align":"center","margin-top":"15px"}},[e("radio-component",{staticStyle:{"margin-bottom":"5px"},attrs:{label:t.kvmMap[n][r].h+","+t.kvmMap[n][r].v},on:{input:t.resetCoord},model:{value:t.master,callback:function(a){t.master=a},expression:"master"}},[t._v("Master")]),e("span",{staticStyle:{display:"block",margin:"5px 0 0"}},[t._v("MAC Address:")]),e("div",{staticStyle:{position:"relative"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.kvmMap[n][r].mac,expression:"kvmMap[y][x].mac"}],staticClass:"setting-text",staticStyle:{width:"130px","font-size":"14px","text-align":"center"},attrs:{type:"text",disabled:t.master===t.kvmMap[n][r].h+","+t.kvmMap[n][r].v},domProps:{value:t.kvmMap[n][r].mac},on:{input:function(a){a.target.composing||t.$set(t.kvmMap[n][r],"mac",a.target.value)}}}),t.macError===(a-1)*t.row+i?e("span",{staticClass:"range-alert"},[t._v("MAC address error")]):t._e()])],1)],1)})),0)})),0):t._e()]):t._e()]),e("footer",[t.sameMacError?e("p",{staticClass:"error-msg"},[t._v("You can not define the same MAC as a Master and a slave")]):t._e(),e("button",{staticClass:"btn btn-primary",attrs:{disabled:"1"===t.castMode},on:{click:t.save}},[t._v("SAVE")])])])},i=[];function r(t){if(Array.isArray(t))return t}e("a4d3"),e("e01a"),e("d3b7"),e("d28b"),e("3ca3"),e("ddb0");function o(t,a){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var e=[],n=!0,i=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done);n=!0)if(e.push(o.value),a&&e.length===a)break}catch(c){i=!0,r=c}finally{try{n||null==s["return"]||s["return"]()}finally{if(i)throw r}}return e}}e("fb6a"),e("b0c0"),e("a630");function s(t,a){(null==a||a>t.length)&&(a=t.length);for(var e=0,n=new Array(a);e<a;e++)n[e]=t[e];return n}function c(t,a){if(t){if("string"===typeof t)return s(t,a);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?s(t,a):void 0}}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function m(t,a){return r(t)||o(t,a)||c(t,a)||l()}function d(t){if(Array.isArray(t))return s(t)}function v(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h(t){return d(t)||v(t)||c(t)||u()}e("ac1f"),e("841c"),e("498a"),e("1276"),e("466d"),e("159b"),e("d81d"),e("13d5"),e("99af");var p=e("b2c7"),f={name:"usb",components:{radioComponent:p["a"]},data:function(){return{timeout:5,kvmMode:"km",col:1,row:1,usbOverIp:"1",master:"0,0",roaming:"2",kvmMap:[[{h:0,mac:"",v:0}]],mac:"",kvm:{},macError:-1,castMode:"0",sameMacError:!1}},created:function(){this.$socket.setCallback(this.handleMsg),this.$socket.sendMsg("#NET-MAC? 0"),this.$socket.sendMsg("#KDS-METHOD? ")},methods:{handleMsg:function(t){-1===t.search(/@KDS-METHOD /i)?-1!==t.search(/@NET-MAC /i)&&this.handleMACAddr(t):this.handleIpCastMode(t)},handleMACAddr:function(t){this.mac=t.split(" ")[1].split(",").pop().trim(),this.getKVMJson()},handleIpCastMode:function(t){this.castMode=t.split(" ")[1]},checkMAC:function(t){for(var a=0;a<t.length;a++)for(var e=0;e<t[a].length;e++)if(t[a][e].mac&&!t[a][e].mac.match(/^([a-f0-9]{2}-){5}[a-f0-9]{2}$/i))return t[a].length*a+e+1;return-1},checkSameMac:function(t){for(var a=0,e=0;e<t.length;e++)for(var n=0;n<t[e].length;n++)t[e][n].mac===this.mac&&a++;return a},save:function(){"1"===this.roaming&&this.col*this.row>16||(this.macError=this.checkMAC(this.kvmMap),-1===this.macError&&(this.checkSameMac(this.kvmMap)>1?this.sameMacError=!0:(this.sameMacError=!1,this.kvm.kvm_timeout_sec=this.timeout,this.kvm.kvm_usb_mode=this.kvmMode,this.kvm.kvm_col=this.col,this.kvm.kvm_row=this.row,this.kvm.km_roaming="0"===this.roaming?[]:this.formatKVMData(this.kvmMap),this.$http.post("/device/json",{path:"/usb/km_usb.json",info:{usb_kvm_config:this.kvm}}))))},getKVMJson:function(){var t=this;this.$http.get("/device/json?path=/usb/km_usb.json&t="+Math.random()).then((function(a){a.data.usb_kvm_config&&(t.kvm=a.data.usb_kvm_config,t.timeout=t.kvm.kvm_timeout_sec,t.kvmMode=t.kvm.kvm_usb_mode,t.roaming=t.kvm.km_roaming.length?"1":"0",t.parseKVM(t.kvm.km_roaming))}))},parseKVM:function(t){var a=this;if(this.roaming=t.length>0?"1":"0",t.length>0){var e=[],n={};t.forEach((function(t){t.v===t.h&&0===t.v&&(t.mac=a.mac),n[t.v]?(e[n[t.v]-1].push(t),e[n[t.v]-1].sort((function(t,a){return t.h-a.h}))):(e.push([t]),n[t.v]=e.length)})),this.kvmMap=e.sort((function(t,a){return a[0].v-t[0].v})),this.row=e.length,this.col=e[0].length}},handleRowKvmMap:function(t,a){var e=this;if(this.macError=-1,t>a)(function(){for(var n=e.kvmMap[e.kvmMap.length-1][0].v-1,i=e.kvmMap[0][0].h,r=0;r<t-a;r++){var o=h(new Array(e.col)).map((function(t,a){return{mac:"",h:i+a,v:n}}));e.kvmMap.push(o)}})();else for(var n=0;n<a-t;n++)this.kvmMap.pop();this.checkMasterExist()},handleColKvmMap:function(t,a){var e=this;this.macError=-1,t!==this.kvmMap[0].length&&(t>a?this.kvmMap.forEach((function(n){for(var i=0;i<t-a;i++){var r=e.kvmMap[i][i].h+1;n.push({mac:"",h:r,v:n[0].v})}})):(this.kvmMap.forEach((function(e){for(var n=0;n<a-t;n++)e.pop()})),this.checkMasterExist()))},checkMasterExist:function(){var t=this.master.split(","),a=m(t,2),e=a[0],n=a[1],i=this.kvmMap[0][0].h,r=this.col+i-1,o=this.kvmMap[0][0].v,s=o-this.row+1;(e<i||e>r||n<s||n>o)&&(this.master=this.kvmMap[0][0].h+","+this.kvmMap[0][0].v,this.resetCoord())},resetCoord:function(){var t=this.masterCoord(),a=t.col,e=t.row;for(var n in this.kvmMap)for(var i in this.kvmMap[n]){var r=e-n,o=i-a;this.kvmMap[n][i].h=o,this.kvmMap[n][i].v=r,this.kvmMap[n][i].mac===this.mac&&(this.kvmMap[n][i].mac=""),o===r&&0===o&&(this.kvmMap[n][i].mac=this.mac)}this.master="0,0"},masterCoord:function(){var t=this.master.split(","),a=m(t,2),e=a[0],n=a[1];for(var i in e=+e,n=+n,this.kvmMap)for(var r in this.kvmMap[i])if(this.kvmMap[i][r].h===e&&this.kvmMap[i][r].v===n)return{row:i,col:r}},formatKVMData:function(t){return t.reduce((function(t,a){return t.concat(a)}))}}},k=f,M=(e("de33"),e("2877")),g=Object(M["a"])(k,n,i,!1,null,"ce3c7eca",null);a["default"]=g.exports},"9bdd":function(t,a,e){var n=e("825a"),i=e("2a62");t.exports=function(t,a,e,r){try{return r?a(n(e)[0],e[1]):a(e)}catch(o){throw i(t),o}}},"9f7c":function(t,a,e){"use strict";e("e075")},a630:function(t,a,e){var n=e("23e7"),i=e("4df4"),r=e("1c7e"),o=!r((function(t){Array.from(t)}));n({target:"Array",stat:!0,forced:o},{from:i})},b2c7:function(t,a,e){"use strict";var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("label",{staticClass:"radio-model",class:{"is-disabled":t.disabled}},[e("span",{staticClass:"radio_input",class:{"is-checked":t.model===t.label}},[e("span",{staticClass:"radio__inner"}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.model,expression:"model"}],attrs:{type:"radio",disabled:t.disabled,name:t.name},domProps:{value:t.label,checked:t._q(t.model,t.label)},on:{change:[function(a){t.model=t.label},t.handleChange]}})]),e("span",{staticClass:"radio__label",on:{keydown:function(t){t.stopPropagation()}}},[t._t("default"),t.$slots.default?t._e():[t._v(t._s(t.isEmpty?"":t.label))]],2)])},i=[],r={name:"radioComponent",props:{label:{type:String,default:""},disabled:{type:Boolean,default:!1},name:String,value:{},isEmpty:{type:Boolean,default:!1}},computed:{model:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},methods:{handleChange:function(){var t=this;this.$nextTick((function(){t.$emit("change",t.model)}))}}},o=r,s=(e("9f7c"),e("2877")),c=Object(s["a"])(o,n,i,!1,null,null,null);a["a"]=c.exports},d58f:function(t,a,e){var n=e("1c0b"),i=e("7b0b"),r=e("44ad"),o=e("50c4"),s=function(t){return function(a,e,s,c){n(e);var l=i(a),m=r(l),d=o(l.length),v=t?d-1:0,u=t?-1:1;if(s<2)while(1){if(v in m){c=m[v],v+=u;break}if(v+=u,t?v<0:d<=v)throw TypeError("Reduce of empty array with no initial value")}for(;t?v>=0:d>v;v+=u)v in m&&(c=e(c,m[v],v,l));return c}};t.exports={left:s(!1),right:s(!0)}},d961:function(t,a,e){},de33:function(t,a,e){"use strict";e("d961")},e075:function(t,a,e){}}]);