(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1ba96158"],{"06c5":function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));a("fb6a"),a("d3b7"),a("b0c0"),a("a630"),a("3ca3");var n=a("6b75");function i(t,e){if(t){if("string"===typeof t)return Object(n["a"])(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Object(n["a"])(t,e):void 0}}},2909:function(t,e,a){"use strict";a.d(e,"a",(function(){return c}));var n=a("6b75");function i(t){if(Array.isArray(t))return Object(n["a"])(t)}a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0"),a("a630");function o(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}var r=a("06c5");function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t){return i(t)||o(t)||Object(r["a"])(t)||s()}},"4df4":function(t,e,a){"use strict";var n=a("0366"),i=a("7b0b"),o=a("9bdd"),r=a("e95a"),s=a("50c4"),c=a("8418"),l=a("35a1");t.exports=function(t){var e,a,u,m,v,d,h=i(t),p="function"==typeof this?this:Array,f=arguments.length,b=f>1?arguments[1]:void 0,k=void 0!==b,g=l(h),M=0;if(k&&(b=n(b,f>2?arguments[2]:void 0,2)),void 0==g||p==Array&&r(g))for(e=s(h.length),a=new p(e);e>M;M++)d=k?b(h[M],M):h[M],c(a,M,d);else for(m=g.call(h),v=m.next,a=new p;!(u=v.call(m)).done;M++)d=k?o(m,b,[u.value,M],!0):u.value,c(a,M,d);return a.length=M,a}},"5a6a":function(t,e,a){},"63a5":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main-setting"},[a("div",{staticClass:"setting-model"},[a("div",{staticClass:"radio-setting"},[a("span",{staticClass:"setting-title"},[t._v("USB over IP")]),a("div",[a("radio-component",{attrs:{label:"1"},model:{value:t.kvmMode,callback:function(e){t.kvmMode=e},expression:"kvmMode"}},[t._v("Optimized for KVM")]),a("radio-component",{attrs:{label:"2"},model:{value:t.kvmMode,callback:function(e){t.kvmMode=e},expression:"kvmMode"}},[t._v("USB Emulation")])],1)]),a("div",{staticClass:"setting"},[a("span",{staticClass:"setting-title"},[t._v("Request Time Out (min)")]),a("el-input-number",{attrs:{"controls-position":"right",min:5,max:10},on:{blur:t.checkBlur},model:{value:t.timeout,callback:function(e){t.timeout=e},expression:"timeout"}})],1),a("div",{staticClass:"radio-setting"},[a("span",{staticClass:"setting-title"},[t._v("Roaming Master/Slaves")]),a("div",[a("radio-component",{attrs:{label:"1"},model:{value:t.roaming,callback:function(e){t.roaming=e},expression:"roaming"}},[t._v("Master")]),a("radio-component",{attrs:{label:"0"},model:{value:t.roaming,callback:function(e){t.roaming=e},expression:"roaming"}},[t._v("Slaves")])],1)]),"1"===t.roaming?a("div",{staticClass:"kvm-view"},[a("div",{staticClass:"error-input"},[t._v(" Row: "),a("el-input-number",{staticStyle:{width:"60px","margin-right":"24px"},attrs:{"controls-position":"right",max:16,min:1},on:{change:t.handleRowKvmMap,blur:t.checkBlur},model:{value:t.row,callback:function(e){t.row=e},expression:"row"}}),t._v(" Col: "),a("el-input-number",{staticStyle:{width:"60px","margin-right":"24px"},attrs:{"controls-position":"right",max:16,min:1},on:{change:t.handleColKvmMap,blur:t.checkBlur},model:{value:t.col,callback:function(e){t.col=e},expression:"col"}}),t.col*t.row>16?a("span",{staticClass:"alert-error",staticStyle:{top:"40px"}},[t._v("Maximum 16 Slaves")]):t._e()],1),t.col*t.row<=16?a("div",{staticClass:"kvm-layout"},t._l(t.row,(function(e,n){return a("div",{key:e},t._l(t.col,(function(e,i){return a("div",{key:e,staticClass:"kvm-child"},[a("icon-svg",{staticStyle:{margin:"0 auto",width:"60px",height:"60px",display:"block"},attrs:{"icon-class":"osd"}}),a("div",{staticStyle:{"text-align":"center","margin-top":"15px"}},[a("radio-component",{staticStyle:{"margin-bottom":"5px"},attrs:{label:t.kvmMap[n][i].h+","+t.kvmMap[n][i].v},on:{input:t.resetCoord},model:{value:t.master,callback:function(e){t.master=e},expression:"master"}},[t._v("Master")]),a("span",{staticStyle:{display:"block",margin:"5px 0 0"}},[t._v("MAC Address:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.kvmMap[n][i].mac,expression:"kvmMap[y][x].mac"}],staticClass:"setting-text",staticStyle:{width:"130px","font-size":"14px","text-align":"center"},attrs:{type:"text"},domProps:{value:t.kvmMap[n][i].mac},on:{input:function(e){e.target.composing||t.$set(t.kvmMap[n][i],"mac",e.target.value)}}})],1)],1)})),0)})),0):t._e()]):t._e()]),a("footer",[a("button",{staticClass:"btn btn-primary",on:{click:t.save}},[t._v("SAVE")])])])},i=[];function o(t){if(Array.isArray(t))return t}a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0");function r(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var a=[],n=!0,i=!1,o=void 0;try{for(var r,s=t[Symbol.iterator]();!(n=(r=s.next()).done);n=!0)if(a.push(r.value),e&&a.length===e)break}catch(c){i=!0,o=c}finally{try{n||null==s["return"]||s["return"]()}finally{if(i)throw o}}return a}}var s=a("06c5");function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(t,e){return o(t)||r(t,e)||Object(s["a"])(t,e)||c()}var u=a("2909"),m=(a("498a"),a("159b"),a("d81d"),a("ac1f"),a("1276"),a("13d5"),a("99af"),a("b2c7")),v={name:"usb",components:{radioComponent:m["a"]},data:function(){return{timeout:5,kvmMode:"1",col:1,row:1,usbOverIp:"1",master:"0,0",roaming:"2",roamingMode:!1,kvmMap:[[{h:0,mac:"",v:0}]]}},beforeCreate:function(){var t=this;this.$socket.ws.onmessage=function(e){t.handleMsg(e.data.trim())}},created:function(){this.getKVMJson()},methods:{handleMsg:function(t){},checkBlur:function(){this.timeout=this.timeout||5,this.col=this.col||this.kvmMap[0].length,this.row=this.row||this.kvmMap.length},save:function(){"1"===this.roaming&&this.col*this.row>16||this.$http.post("/usb/set_km_usb",{"USB-KVM_config":{kvm_usb_mode:this.kvmMode,kvm_timeout_sec:this.timeout,km_roaming:"0"===this.roaming?[]:this.formatKVMData(this.kvmMap)}})},getKVMJson:function(){var t=this;this.$http.post("/usb/km_usb").then((function(e){if(e.data){var a=e.data["USB-KVM_config"];t.timeout=a.kvm_timeout_sec,t.kvmMode=a.kvm_usb_mode,t.parseKVM(a.km_roaming)}}))},parseKVM:function(t){if(this.roaming=t.length>0?"1":"0",t.length>0){var e=[],a={};t.forEach((function(t){a[t.v]?(e[a[t.v]-1].push(t),e[a[t.v]-1].sort((function(t,e){return t.h-e.h}))):(e.push([t]),a[t.v]=e.length)})),this.kvmMap=e.sort((function(t,e){return e[0].v-t[0].v})),this.row=e.length,this.col=e[0].length}},handleRowKvmMap:function(t,e){if(this.col*this.row<=16){if(t===this.kvmMap.length)return;if(t>e){var a=this.kvmMap[this.kvmMap.length-1][0].v-1,n=this.kvmMap[0][0].h,i=Object(u["a"])(new Array(this.col)).map((function(t,e){return{mac:"",h:n+e,v:a}}));this.kvmMap.push(i)}else this.kvmMap.pop();this.checkMasterExist()}},handleColKvmMap:function(t,e){if(this.col*this.row<=16){if(t===this.kvmMap[0].length)return;if(t>e){var a=this.kvmMap[0][this.kvmMap[0].length-1].h+1;this.kvmMap.forEach((function(t){t.push({mac:"",h:a,v:t[0].v})}))}else this.kvmMap.forEach((function(t){t.pop()})),this.checkMasterExist()}},checkMasterExist:function(){var t=this.master.split(","),e=l(t,2),a=e[0],n=e[1],i=this.kvmMap[0][0].h,o=this.col+i-1,r=this.kvmMap[0][0].v,s=r-this.row+1;(a<i||a>o||n<s||n>r)&&(this.master=this.kvmMap[0][0].h+","+this.kvmMap[0][0].v,this.resetCoord())},resetCoord:function(){var t=this.masterCoord(),e=t.col,a=t.row;for(var n in this.kvmMap)for(var i in this.kvmMap[n]){var o=a-n,r=i-e;this.kvmMap[n][i].h=r,this.kvmMap[n][i].v=o}this.master="0,0"},masterCoord:function(){var t=this.master.split(","),e=l(t,2),a=e[0],n=e[1];for(var i in a=+a,n=+n,this.kvmMap)for(var o in this.kvmMap[i])if(this.kvmMap[i][o].h===a&&this.kvmMap[i][o].v===n)return{row:i,col:o}},formatKVMData:function(t){return t.reduce((function(t,e){return t.concat(e)}))}}},d=v,h=(a("c591"),a("2877")),p=Object(h["a"])(d,n,i,!1,null,"2bbd15de",null);e["default"]=p.exports},"6b75":function(t,e,a){"use strict";function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}a.d(e,"a",(function(){return n}))},"9bdd":function(t,e,a){var n=a("825a"),i=a("2a62");t.exports=function(t,e,a,o){try{return o?e(n(a)[0],a[1]):e(a)}catch(r){throw i(t),r}}},"9f7c":function(t,e,a){"use strict";a("e075")},a630:function(t,e,a){var n=a("23e7"),i=a("4df4"),o=a("1c7e"),r=!o((function(t){Array.from(t)}));n({target:"Array",stat:!0,forced:r},{from:i})},b2c7:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{staticClass:"radio-model",class:{"is-disabled":t.disabled}},[a("span",{staticClass:"radio_input",class:{"is-checked":t.model===t.label}},[a("span",{staticClass:"radio__inner"}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.model,expression:"model"}],attrs:{type:"radio",disabled:t.disabled,name:t.name},domProps:{value:t.label,checked:t._q(t.model,t.label)},on:{change:[function(e){t.model=t.label},t.handleChange]}})]),a("span",{staticClass:"radio__label",on:{keydown:function(t){t.stopPropagation()}}},[t._t("default"),t.$slots.default?t._e():[t._v(t._s(t.isEmpty?"":t.label))]],2)])},i=[],o={name:"radioComponent",props:{label:{type:String,default:""},disabled:{type:Boolean,default:!1},name:String,value:{},isEmpty:{type:Boolean,default:!1}},computed:{model:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},methods:{handleChange:function(){var t=this;console.log(this.disabled),this.$nextTick((function(){t.$emit("change",t.model)}))}}},r=o,s=(a("9f7c"),a("2877")),c=Object(s["a"])(r,n,i,!1,null,null,null);e["a"]=c.exports},c591:function(t,e,a){"use strict";a("5a6a")},e075:function(t,e,a){}}]);