<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
		<title>Video Wall Setup</title>
		<!--
		<link type="text/css" rel="stylesheet" href="css/blueprint/reset.css" />
		<link type="text/css" rel="stylesheet" href="css/blueprint/typography.css" />
		<link type="text/css" rel="stylesheet" href="css/blueprint/forms.css" />
		-->
		<link type="text/css" rel="stylesheet" href="../css/blueprint/screen.css" />
		<!-- Should only load for IE. But nothing magic happen. :(
		<link type="text/css" rel="stylesheet" href="css/blueprint/ie.css" />
		-->
		<link type="text/css" rel="stylesheet" href="../css/formalize.css" />
		<link type="text/css" rel="stylesheet" href="../css/start/jquery-ui-1.8.12.custom.css" />	
		<script type="text/javascript" src="../js/jquery-1.5.1.min.js"></script>
		<script type="text/javascript" src="../js/jquery-ui-1.8.12.custom.min.js"></script>
		<script type="text/javascript" src="../js/jquery.formalize.min.js"></script>
		<!--<script type="text/javascript" src="js/jquery.corner.js"></script>-->
		<script type="text/javascript" src="../js/include.js"></script>
		<script type="text/javascript" src="../js/my-util.js"></script>
		<script type="text/javascript" src="../js/vw_target_selection.js"></script>
		<script type="text/javascript">
			$(window).load(function(){
				//
				//
				//
				$("#accordion").bind("accordionchange", function(event, ui) {
					/* To Enable OSD*/
					if (ui.newHeader.attr('id') == 'step_basic_setup_2') {
						var cmd = $.param({
							cache: false,
							nocache: (new Date()).getTime(), //don't cache cgi get hack for IE
							cmd: "e e_vw_config_osd_on"
						});
						//alert(cmd);
						$.get(CGI_PATH+"sh.cgi", cmd)
							.success(function(){highlight("#dummy_hdr_main", "Note:", "Confirm the horizontal position of each display. To disable OSD, go to next step.");})
							.error(function(){error("#dummy_hdr_main", "Error:", "Enable OSD failed.");})
							.complete(function(){});
						mylog("Enable OSD");
					}
					/* To Disable OSD */
					else if (ui.oldHeader.attr('id') == 'step_basic_setup_2') {
						var cmd = $.param({
							cache: false,
							nocache: (new Date()).getTime(), //don't cache cgi get hack for IE
							cmd: "e e_vw_config_osd_off"
						});
						$.get(CGI_PATH+"sh.cgi", cmd)
							.success(function(){})
							.error(function(){error("#dummy_hdr_main", "Error:", "Disable OSD failed.");})
							.complete(function(){});
						mylog("Disable OSD");
					}
				});

				$("#button_vw_layout_apply").click(function(){
					var maxRow = $("#select_MaxRow").attr("value");
					var maxCol = $("#select_MaxCol").attr("value");
					var cmd = $.param({
						cache: false,
						nocache: (new Date()).getTime(), //don't cache cgi get hack for IE
						cmd: "e e_vw_refresh_pos_idx_start_" + maxRow + "_" + maxCol
/*
						cmd: "e r99_e_vw_enable_" + maxRow + "_" + maxCol + "_d_x" +
						     ";" +
						     "e r99_msg_toFFFFFFFF_e_vw_enable_" + maxRow + "_" + maxCol + "_d_x" +
						     ";" +
						     "e e_vw_pos_layout_" + maxRow + "_" + maxCol
*/
					 });
					$.get(CGI_PATH+"sh.cgi", cmd)
						.error(function(){error("#dummy_hdr_main", "Error:", "Failed to apply change?! Check network.");})
						.complete(function(){
							/* For Test Only
							LM_PARAM.VW_VAR_POS_MAX_ROW = maxRow;
							LM_PARAM.VW_VAR_POS_MAX_COL = maxCol;
							*/
						})
						.success(function(){
							highlight("#dummy_hdr_main", "Change Applied:", "Please wait untill screen shows up again.");
							//LM_PARAM.VW_VAR_MAX_ROW = maxRow;
							//LM_PARAM.VW_VAR_MAX_COLUMN = maxCol;
							LM_PARAM.VW_VAR_POS_MAX_ROW = maxRow;
							LM_PARAM.VW_VAR_POS_MAX_COL = maxCol;
						});
					});
				
				$("#button_vw_install_next").click(function(){
					var cmd = $.param({
						cache: false,
						nocache: (new Date()).getTime(), //don't cache cgi get hack for IE
						cmd: "e e_button_link"
					});
					$.get(CGI_PATH+"sh.cgi", cmd)
						.success(function(){highlight("#dummy_hdr_main", "Success:", "Choose horizontal next monitor.");})
						.error(function(){error("#dummy_hdr_main", "Error:", "Try again.");})
						.complete(function(){});
				});
				$("#button_vw_install_next_row").click(function(){
					var cmd = $.param({
						cache: false,
						nocache: (new Date()).getTime(), //don't cache cgi get hack for IE
						cmd: "e e_button_link_1"
					});
					$.get(CGI_PATH+"sh.cgi", cmd)
						.success(function(){highlight("#dummy_hdr_main", "Success:", "Choose vertical next monitor.");})
						.error(function(){error("#dummy_hdr_main", "Error:", "Try again.");})
						.complete(function(){});
				});
				$("#button_vw_install_toggle_column").click(function(){
					var cmd = $.param({
						cache: false,
						nocache: (new Date()).getTime(), //don't cache cgi get hack for IE
						cmd: "e e_button_pairing"
					});
					$.get(CGI_PATH+"sh.cgi", cmd)
						.success(function(){highlight("#dummy_hdr_main", "Success:", "Change column position.");})
						.error(function(){error("#dummy_hdr_main", "Error:", "Try again.");})
						.complete(function(){});
				});

				$("#button_vw_fc_apply").click(function(){
					var ht = $("#vw_HT").attr("value"),
						vt = $("#vw_VT").attr("value"),
						ha = $("#vw_HA").attr("value"),
						va = $("#vw_VA").attr("value"),
						regExp=/^\d+$/i; //Match for all digit
					if (!regExp.test(ht)) {
						error("#dummy_hdr_main", "Error:", "Outside width(OW) is not a valid integer number!");
						return;
					}
					if (!regExp.test(vt)) {
						error("#dummy_hdr_main", "Error:", "Outside height(OH) is not a valid integer number!");
						return;
					}
					if (!regExp.test(ha)) {
						error("#dummy_hdr_main", "Error:", "Viewable width(VW) is not a valid integer number!");
						return;
					}
					if (!regExp.test(va)) {
						error("#dummy_hdr_main", "Error:", "Viewable height(VH) is not a valid integer number!");
						return;
					}
					ht = parseInt(ht);
					if (isNaN(ht)) {
						error("#dummy_hdr_main", "Error:", "Outside width(OW) is not a valid integer number!");
						return;
					}
					vt = parseInt(vt);
					if (isNaN(vt)) {
						error("#dummy_hdr_main", "Error:", "Outside height(OH) is not a valid integer number!");
						return;
					}
					ha = parseInt(ha);
					if (isNaN(ha)) {
						error("#dummy_hdr_main", "Error:", "Viewable width(VW) is not a valid integer number!");
						return;
					}
					va = parseInt(va);
					if (isNaN(va)) {
						error("#dummy_hdr_main", "Error:", "Viewable height(VH) is not a valid integer number!");
						return;
					}
					if (ha > ht) {
						error("#dummy_hdr_main", "Error:", "Viewable width(VW) MUST less than Outside width(OW)!");
						return;
					}
					if (va > vt) {
						error("#dummy_hdr_main", "Error:", "Viewable height(VH) MUST less than Outside height(OH)!");
						return;
					}
					var cmd = $.param({
						cache: false,
						nocache: (new Date()).getTime(), //don't cache cgi get hack for IE
						cmd: "e r99_e_vw_moninfo_" + ha + "_" + ht + "_" + va + "_" + vt
					});
					$.get(CGI_PATH+"sh.cgi", cmd)
						.error(function(){error("#dummy_hdr_main", "Error:", "Try again.");})
						.complete(function(){})
						.success(function(){
							highlight("#dummy_hdr_main", "Success:", "Frame compensation value applied.");
							LM_PARAM.VW_VAR_MONINFO_HT = ht;
							LM_PARAM.VW_VAR_MONINFO_VT = vt;
							LM_PARAM.VW_VAR_MONINFO_HA = ha;
							LM_PARAM.VW_VAR_MONINFO_VA = va;
						});
				});
				//
				// Handle events of accordion_vw_adv changes
				//
				$("#accordion_vw_adv").bind("accordionchange", function(event, ui) {
					if (ui.oldHeader.attr('id') == "setup_adv_step1") {
						$("#container_vw_setup_adv_step2 button.button-vw-adv-apply").button("disable");
						$("#vw_adv_h_shift_direction").buttonset();
						$("#vw_adv_v_shift_direction").buttonset();
						if (g.vw_adv_setup_target_h.length) {
							// Host selected
							//alert("Host:" + VW_ADV_SETUP_TARGET);
							$("#button_vw_adv_reset_to_basic_apply").button("enable");
							$("#button_vw_adv_layout_apply").button("enable");
							$("#button_vw_adv_rownum_apply").button("enable");
							//$("#button_vw_adv_colnum_apply").button("enable");
							//$("#button_vw_adv_h_shift_apply").button("enable");
							$("#button_vw_adv_v_shift_apply").button("enable");
							//$("#button_vw_adv_h_scalue_up_apply").button("enable");
							//$("#button_vw_adv_v_scalue_up_apply").button("enable");
							//$("#button_vw_adv_delay_kick_apply").button("enable");
							$("#button_vw_adv_console_api_apply").button("enable");
						} 
						if (g.vw_adv_setup_target_c.length) {
							// Client selected
							//alert("Client:" + VW_ADV_SETUP_TARGET);
							$("#button_vw_adv_reset_to_basic_apply").button("enable");
							$("#button_vw_adv_layout_apply").button("enable");
							$("#button_vw_adv_rownum_apply").button("enable");
							$("#button_vw_adv_colnum_apply").button("enable");
							$("#button_vw_adv_h_shift_apply").button("enable");
							$("#button_vw_adv_v_shift_apply").button("enable");
							$("#button_vw_adv_h_scalue_up_apply").button("enable");
							$("#button_vw_adv_v_scalue_up_apply").button("enable");
							$("#button_vw_adv_delay_kick_apply").button("enable");
							$("#button_vw_adv_console_api_apply").button("enable");
						}
						if (g.$button_vw_adv_show_osd.attr('checked')) {
							// Turn off all OSD. And toggle the "show OSD" button.
							g.$button_vw_adv_show_osd.attr('checked', false).change();
						}
						if (!g.vw_adv_setup_target_h.length && !g.vw_adv_setup_target_c.length) {
							error("#dummy_hdr_main", "Error:", "Please select at least one target in Step1.");
						}
					} else if (ui.newHeader.attr('id') == "setup_adv_step1") {
						notice("#dummy_hdr_main", 'clear');
						// Fire a click event to the default button.
						//$(":input:radio[name='vw_target_select']:checked").change();
					}
				});
				//
				// Handle of vw_adv target selection options
				//
				g.$chkbox_vw_adv_use_r99 = $("#chkbox_vw_adv_use_r99"); g.$chkbox_vw_adv_use_r99.change(function(){
					vw_adv_update_target_list();
					if (g.$button_vw_adv_show_osd.attr('checked')) {
						g.$button_vw_adv_show_osd.change();
					}
				});
				g.$button_vw_adv_show_osd.change(function(){
					var cmd_str = "e r99_msg_toFFFFFFFF_e_vwbtn_menu_cancel",
						cmd;
					cmd = $.param({
						cache: false,
						nocache: (new Date()).getTime(), //don't cache cgi get hack for IE
						cmd: cmd_str
					});
					$.get(CGI_PATH+"sh.cgi", cmd)
						.success(function(){})
						.error(function(){error("#dummy_hdr_main", "Error:", "Try again.");})
						.complete(function(){
							cmd_str = "";
							if (!g.$button_vw_adv_show_osd.attr('checked'))
								return;
							if (!g.vw_adv_setup_target_c.length)
								return;
							for (var i = 0; i < g.vw_adv_setup_target_c.length; i++) {
								cmd_str = cmd_str.concat("e "+g.vw_adv_setup_target_c[i]+ "e_vwbtn_menu_on;");
							}
							cmd = $.param({
								cache: false,
								nocache: (new Date()).getTime(), //don't cache cgi get hack for IE
								cmd: cmd_str
							});
							$.get(CGI_PATH+"sh.cgi", cmd)
								.success(function(){highlight("#dummy_hdr_main", "Success:", "Showing up OSD...");})
								.error(function(){error("#dummy_hdr_main", "Error:", "Try again.");})
								.complete(function(){});
						});
				});
				//
				// Handle of vw_adv apply buttons
				//
				$("#button_vw_adv_reset_to_basic_apply").click(function(){
					var maxRow = LM_PARAM.VW_VAR_POS_MAX_ROW,
						maxCol = LM_PARAM.VW_VAR_POS_MAX_COL,
						cmd_str = "",
						cmd;
					for (var i = 0; i < g.vw_adv_setup_target_h.length; i++) {
						cmd_str = cmd_str.concat("e "+g.vw_adv_setup_target_h[i]+ "e_vw_reset_to_pos_" + maxRow + "_"+ maxCol + ";");
					}
					for (var i = 0; i < g.vw_adv_setup_target_c.length; i++) {
						cmd_str = cmd_str.concat("e "+g.vw_adv_setup_target_c[i]+ "e_vw_reset_to_pos_" + maxRow + "_"+ maxCol + ";");
					}
					cmd = $.param({
						cache: false,
						nocache: (new Date()).getTime(), //don't cache cgi get hack for IE
						cmd: cmd_str
					});
					$.get(CGI_PATH+"sh.cgi", cmd)
						.success(function(){highlight("#dummy_hdr_main", "Success:", "Reset applied.");})
						.error(function(){error("#dummy_hdr_main", "Error:", "Try again.");})
						.complete(function(){});
				});
				$("#button_vw_adv_layout_apply").click(function(){
					var maxRow = $("#select_vw_adv_MaxRow").attr("value"),
						maxCol = $("#select_vw_adv_MaxCol").attr("value"),
						cmd_str = "",
						cmd;
					for (var i = 0; i < g.vw_adv_setup_target_h.length; i++) {
						cmd_str = cmd_str.concat("e "+g.vw_adv_setup_target_h[i]+ "e_vw_enable_" + maxRow + "_"+ maxCol + "_x_x;");
					}
					for (var i = 0; i < g.vw_adv_setup_target_c.length; i++) {
						cmd_str = cmd_str.concat("e "+g.vw_adv_setup_target_c[i]+ "e_vw_enable_" + maxRow + "_"+ maxCol + "_x_x;");
					}
					cmd = $.param({
						cache: false,
						nocache: (new Date()).getTime(), //don't cache cgi get hack for IE
						cmd: cmd_str
					});
					$.get(CGI_PATH+"sh.cgi", cmd)
						.success(function(){highlight("#dummy_hdr_main", "Success:", "New layout applied.");})
						.error(function(){error("#dummy_hdr_main", "Error:", "Try again.");})
						.complete(function(){});
				});

				$("#button_vw_adv_rownum_apply").click(function(){
					var rowNum = $("#select_vw_adv_RowNum").attr("value"),
						cmd_str = "",
						cmd;
					for (var i = 0; i < g.vw_adv_setup_target_h.length; i++) {
						cmd_str = cmd_str.concat("e "+g.vw_adv_setup_target_h[i]+ "e_vw_enable_x_x_" + rowNum + "_x;");
					}
					for (var i = 0; i < g.vw_adv_setup_target_c.length; i++) {
						cmd_str = cmd_str.concat("e "+g.vw_adv_setup_target_c[i]+ "e_vw_enable_x_x_" + rowNum + "_x;");
					}
					cmd = $.param({
						cache: false,
						nocache: (new Date()).getTime(), //don't cache cgi get hack for IE
						cmd: cmd_str
					});
					$.get(CGI_PATH+"sh.cgi", cmd)
						.success(function(){highlight("#dummy_hdr_main", "Success:", "New row position applied.");})
						.error(function(){error("#dummy_hdr_main", "Error:", "Try again.");})
						.complete(function(){});
				});

				$("#button_vw_adv_colnum_apply").click(function(){
					var colNum = $("#select_vw_adv_ColNum").attr("value"),
						cmd_str = "",
						cmd;
					/* Host doesn't support colNum
					for (var i = 0; i < g.vw_adv_setup_target_h.length; i++) {
						cmd_str = cmd_str.concat("e "+g.vw_adv_setup_target_h[i]+ "e_vw_enable_x_x_x_" + colNum + ";");
					}
					*/
					for (var i = 0; i < g.vw_adv_setup_target_c.length; i++) {
						cmd_str = cmd_str.concat("e "+g.vw_adv_setup_target_c[i]+ "e_vw_enable_x_x_x_" + colNum + ";");
					}
					cmd = $.param({
						cache: false,
						nocache: (new Date()).getTime(), //don't cache cgi get hack for IE
						cmd: cmd_str
					});
					$.get(CGI_PATH+"sh.cgi", cmd)
						.success(function(){highlight("#dummy_hdr_main", "Success:", "New column position applied.");})
						.error(function(){error("#dummy_hdr_main", "Error:", "Try again.");})
						.complete(function(){});
				});

				$("#button_vw_adv_h_shift_apply").click(function(){
					var dir = $("input:radio[name=vw_adv_h_shift_direction]:checked").val(),
						shift = $("#text_vw_adv_h_shift").val(),
						cmd_str = "",
						cmd;
					/* Host doesn't support h_shift
					for (var i = 0; i < g.vw_adv_setup_target_h.length; i++) {
						cmd_str = cmd_str.concat("e "+g.vw_adv_setup_target_h[i]+ "e_vw_h_shift_" + dir + "_" + shift + ";");
					}
					*/
					for (var i = 0; i < g.vw_adv_setup_target_c.length; i++) {
						cmd_str = cmd_str.concat("e "+g.vw_adv_setup_target_c[i]+ "e_vw_h_shift_" + dir + "_" + shift + ";");
					}
					cmd = $.param({
						cache: false,
						nocache: (new Date()).getTime(), //don't cache cgi get hack for IE
						cmd: cmd_str
					});
					$.get(CGI_PATH+"sh.cgi", cmd)
						.success(function(){highlight("#dummy_hdr_main", "Success:", "New horizontal shift value applied.");})
						.error(function(){error("#dummy_hdr_main", "Error:", "Try again.");})
						.complete(function(){});
				});

				$("#button_vw_adv_v_shift_apply").click(function(){
					var dir = $("input:radio[name=vw_adv_v_shift_direction]:checked").val(),
						shift = $("#text_vw_adv_v_shift").val(),
						cmd_str = "",
						cmd;

					for (var i = 0; i < g.vw_adv_setup_target_h.length; i++) {
						cmd_str = cmd_str.concat("e "+g.vw_adv_setup_target_h[i]+ "e_vw_v_shift_" + dir + "_" + shift + ";");
					}
					for (var i = 0; i < g.vw_adv_setup_target_c.length; i++) {
						cmd_str = cmd_str.concat("e "+g.vw_adv_setup_target_c[i]+ "e_vw_v_shift_" + dir + "_" + shift + ";");
					}
					cmd = $.param({
						cache: false,
						nocache: (new Date()).getTime(), //don't cache cgi get hack for IE
						cmd: cmd_str
					});
					$.get(CGI_PATH+"sh.cgi", cmd)
						.success(function(){highlight("#dummy_hdr_main", "Success:", "New vertical shift value applied.");})
						.error(function(){error("#dummy_hdr_main", "Error:", "Try again.");})
						.complete(function(){});
				});

				$("#button_vw_adv_h_scalue_up_apply").click(function(){
					var scale = $("#text_vw_adv_h_scale_up").val(),
						cmd_str = "",
						cmd;
					/*
					for (var i = 0; i < g.vw_adv_setup_target_h.length; i++) {
						cmd_str = cmd_str.concat("e "+g.vw_adv_setup_target_h[i]+ "e_vw_h_scale_" + scale + ";");
					}
					*/
					for (var i = 0; i < g.vw_adv_setup_target_c.length; i++) {
						cmd_str = cmd_str.concat("e "+g.vw_adv_setup_target_c[i]+ "e_vw_h_scale_" + scale + ";");
					}
					cmd = $.param({
						cache: false,
						nocache: (new Date()).getTime(), //don't cache cgi get hack for IE
						cmd: cmd_str
					});
					$.get(CGI_PATH+"sh.cgi", cmd)
						.success(function(){highlight("#dummy_hdr_main", "Success:", "New horizontal scale value applied.");})
						.error(function(){error("#dummy_hdr_main", "Error:", "Try again.");})
						.complete(function(){});
				});

				$("#button_vw_adv_v_scalue_up_apply").click(function(){
					var scale = $("#text_vw_adv_v_scale_up").val(),
						cmd_str = "",
						cmd;
					/*
					for (var i = 0; i < g.vw_adv_setup_target_h.length; i++) {
						cmd_str = cmd_str.concat("e "+g.vw_adv_setup_target_h[i]+ "e_vw_v_scale_" + scale + ";");
					}
					*/
					for (var i = 0; i < g.vw_adv_setup_target_c.length; i++) {
						cmd_str = cmd_str.concat("e "+g.vw_adv_setup_target_c[i]+ "e_vw_v_scale_" + scale + ";");
					}
					cmd = $.param({
						cache: false,
						nocache: (new Date()).getTime(), //don't cache cgi get hack for IE
						cmd: cmd_str
					});
					$.get(CGI_PATH+"sh.cgi", cmd)
						.success(function(){highlight("#dummy_hdr_main", "Success:", "New vertical scale value applied.");})
						.error(function(){error("#dummy_hdr_main", "Error:", "Try again.");})
						.complete(function(){});
				});

				$("#button_vw_adv_delay_kick_apply").click(function(){
					var us = $("#text_vw_adv_delay_kick").val(),
						cmd_str = "",
						cmd;
					/*
					for (var i = 0; i < g.vw_adv_setup_target_h.length; i++) {
						cmd_str = cmd_str.concat("e "+g.vw_adv_setup_target_h[i]+ "e_vw_delay_kick_" + us + ";");
					}
					*/
					for (var i = 0; i < g.vw_adv_setup_target_c.length; i++) {
						cmd_str = cmd_str.concat("e "+g.vw_adv_setup_target_c[i]+ "e_vw_delay_kick_" + us + ";");
					}
					cmd = $.param({
						cache: false,
						nocache: (new Date()).getTime(), //don't cache cgi get hack for IE
						cmd: cmd_str
					});
					$.get(CGI_PATH+"sh.cgi", cmd)
						.success(function(){highlight("#dummy_hdr_main", "Success:", "New delay value applied.");})
						.error(function(){error("#dummy_hdr_main", "Error:", "Try again.");})
						.complete(function(){});
				});

				$("#button_vw_adv_console_api_apply").click(function(){
					var shell = $("#text_vw_adv_console_api").val(),
						cmd;
					for (var i = 0; i < g.vw_adv_setup_target_c.length; i++) {
						// r99_e_sh_cmd=xxxxxxxxxxxx&
						cmd = $.param([
							{
								name: g.vw_adv_setup_target_c[i] + "e_sh_cmd",
								value: shell
							},
							{ name: 'cache', value: false },
							{ name: 'nocache', value: (new Date()).getTime() }
						]);
						$.get(CGI_PATH+"e.cgi", cmd)
							.success(function(){})
							.error(function(){error("#dummy_hdr_main", "Error:", "Try again.");})
							.complete(function(){});						
					}

					for (var i = 0; i < g.vw_adv_setup_target_h.length; i++) {
						// r99_e_sh_cmd=xxxxxxxxxxxx&
						cmd = $.param([
							{
								name: g.vw_adv_setup_target_h[i] + "e_sh_cmd",
								value: shell
							},
							{ name: 'cache', value: false },
							{ name: 'nocache', value: (new Date()).getTime() }
						]);
						$.get(CGI_PATH+"e.cgi", cmd)
							.success(function(){})
							.error(function(){error("#dummy_hdr_main", "Error:", "Try again.");})
							.complete(function(){});						
					}
				});

			});
			//
			// on Document ready
			//
			$(function(){

				if ($.browser.msie)
					notice("#dummy_hdr_main", 'highlight', 'Note!', 'Best viewed with Chrome 9+ @ 1024x768.', function() {
							setTimeout(function (){
								notice("#dummy_hdr_main", 'clear');
							}, 5000);
						});

						
				$("#button_vw_layout_apply, \
				   #button_vw_install_toggle_column, \
				   #button_vw_fc_apply, \
				   #container_vw_setup_adv_step2 button.button-vw-adv-apply"
				   )
				.button();

				$("#button_vw_install_next")
				.button()
				.next()
					.button()
					.parent()
						.buttonset();

				g.$button_vw_adv_show_osd = $("#button_vw_adv_show_osd").button();
				//
				// Handle Events of tab changes
				//
				$("#tabs").bind("tabsshow", function(event, ui){
					var selected = $("#tabs").tabs("option", "selected");
					if (selected == 1) {
						vw_adv_target_selection_init();
						highlight("#dummy_hdr_main", "NOTE:", "Select a target to control.");
						highlight("#dummy_hdr_main", "NOTE:", "Advanced setup works only after basic setup is done.");
					} else {
						//highlight("#dummy_hdr_main", "NOTE", "Hello World!");
					}
					if (g.$button_vw_adv_show_osd.attr('checked')) {
						// Turn off all OSD. And toggle the "show OSD" button.
						g.$button_vw_adv_show_osd.attr('checked', false).change();
					}
				});
				$("#tabs").triggerHandler("tabsshow");
				//$.uicornerfix('5px');
			});
		</script>
		<style type="text/css">
			*.select-item {
				width: 10em;
				height: 2.3em;
				padding: 2px 3px;
				margin: 0.5em 0;
			}
			*.tab-view {
				width: 768px;
			}
			#dimension-gf img, #monitor_count-gf img {
				width: 300px;
				vertical-align: middle;
				text-align:center;
			}
			#dimension-gf, #monitor_count-gf {
				vertical-align: middle;
				text-align:center;
			}
			button, #button_vw_adv_show_osd+[role='button'] {
				width: 11em;
				padding: 2px 0;
				margin: 0.5em 0;
			}
			.button-vw-adv-apply {
				float: right;
				width: 8em;
			}
			.buttonset-pair label[class~='ui-button'] {
				width: 4.5em;
			}
			.notice-block {
				display: block;
				height: 2em;
				padding-top: 1em;
				padding-bottom: 1.3em;
			}
			.notice-block-fixed {
				/* use absolution instead of fixed for IE6 fix */
				position: absolute;
				z-index: 9999;
				opacity: 0.8;
				/* Following is IE hack for transparency */
				zoom: 1;
				filter: alpha(opacity=80);
			}
			.notice-block-top {
				/* use absolution instead of fixed for IE6 fix */
				position: absolute;
				z-index: 9999;
				top: 0em;
			}
			.input-text-long {
				width: 35em;
			}
		</style>
	</head>
	<body class="container showgrid" style="width: 800px;">
		<!-- Start of Warning/Error messages -->
		<div class="notice-block" style="width: 773px;">
		<!-- This is a space reserved for the notice_block -->
		</div>
		<div id="notice_block" style="width: 773px;" class="notice-block-top">
			<div class="notice-block ui-widget" id="dummy_hdr_main">
				<div style="padding: 0 .7em;"> 
					<p style="margin: 0.5em"><span class="notice-icon" style="float: left;"></span><strong></strong><span>&nbsp</span><span class="notice-str">&nbsp</span></p>
				</div>
			</div>
		</div>

		<!-- Init ------------------------------------------------------------->
		<script type="text/javascript">
			g.$view = $(window);
			g.$dialog_loading = $("<div></div>")
							.html("<table style='margin-bottom:auto;margin-top:auto;height:50px'><tr><td style='vertical-align:middle'><h4 style='margin-bottom:0'>Loading...</h4></td></tr></table>")
							.dialog({
								autoOpen: false,
								modal: true,
								closeOnEscape: false,
								draggable: false,
								resizable: false,
								hide: 'fade', //TBD effect
								//title: 'Welcome',
								width: 200,
								height: 50,
								//minHeight: 50,
								//dialogClass: 'no-close',
								open: function(event, ui) {
									$(".ui-dialog-titlebar-close", $(this).parent()).hide(); //Hide close button
									$(".ui-dialog-titlebar", $(this).parent()).hide();  //Hide the title bar
									$(".ui-dialog-content", $(this).parent()).height('50px').css('min-height','10px'); //A heck to patch the height value in chrome
								}
							});

			g.$dialog_loading.dialog('open');
			notice_block_init();
			query_lm_param(function(lm_param) {
				//$.each(lm_param, function(key, val) {
					//alert("key:"+key+"\nval:"+val);
					if (!LM_PARAM.EN_VIDEO_WALL || (LM_PARAM.EN_VIDEO_WALL == 'n')) {
						//window.location="../"
						alert("Error!! Video Wall feature is not enabled yet!!");
					}
					if (!LM_PARAM.VW_VAR_POS_MAX_ROW) LM_PARAM.VW_VAR_POS_MAX_ROW='0'
					if (!LM_PARAM.VW_VAR_POS_MAX_COL) LM_PARAM.VW_VAR_POS_MAX_COL='0'
					if (!LM_PARAM.VW_VAR_MONINFO_HT) LM_PARAM.VW_VAR_MONINFO_HT='0'
					if (!LM_PARAM.VW_VAR_MONINFO_VT) LM_PARAM.VW_VAR_MONINFO_VT='0'
					if (!LM_PARAM.VW_VAR_MONINFO_HA) LM_PARAM.VW_VAR_MONINFO_HA='0'
					if (!LM_PARAM.VW_VAR_MONINFO_VA) LM_PARAM.VW_VAR_MONINFO_VA='0'
					if (!LM_PARAM.VW_VAR_TAIL_IDX) LM_PARAM.VW_VAR_TAIL_IDX='0'
					
					$("#select_MaxRow").attr("value", LM_PARAM.VW_VAR_POS_MAX_ROW);
					$("#select_MaxCol").attr("value", LM_PARAM.VW_VAR_POS_MAX_COL);

					$("#vw_HT").attr("value", LM_PARAM.VW_VAR_MONINFO_HT);
					$("#vw_VT").attr("value", LM_PARAM.VW_VAR_MONINFO_VT);
					$("#vw_HA").attr("value", LM_PARAM.VW_VAR_MONINFO_HA);
					$("#vw_VA").attr("value", LM_PARAM.VW_VAR_MONINFO_VA);
					g.$dialog_loading.dialog('close');
				//});
			});
		</script>


		<!-- Tabs -->
		<div id="tabs" class="tab-view">
			<ul id="tab_list" style="display: none">
				<li><a href="#tabs-1">Basic Setup</a></li>
				<li><a href="#tabs-2">Advanced Setup</a></li>
				<li><a href="#tabs-3" style="display: none">Statistics</a></li>
			</ul>
			<div id="tabs-1">

				<!-- Accordion -->
				<!--<h2 class="demoHeaders">Accordion</h2>-->
				<div id="accordion" style="display:none">
					<div>
						<h3 id="step_basic_setup_1"><a href="#">Step 1: Choose Wall Size (Reset Position Layout)</a></h3>
						<div>
							<table>
							<tr>
								<td style="vertical-align: top">
									<p>
										<label for="select_MaxRow">Vertical Monitor Count:</label><br />
										<select id="select_MaxRow" class="select-item" name="select_MaxRow"> 
											<option value="0">1</option>
											<option value="1">2</option>
											<option value="2">3</option>
											<option value="3">4</option>
											<option value="4">5</option>
											<option value="5">6</option>
											<option value="6">7</option>
											<option value="7">8</option>
											<!--<option value="8">9</option>-->
											<!--<option value="9">10</option>-->
											<!--<option value="10">11</option>-->
											<!--<option value="11">12</option>-->
											<!--<option value="12">13</option>-->
											<!--<option value="13">14</option>-->
											<!--<option value="14">15</option>-->
											<!--<option value="15">16</option>-->
										</select>
									</p>
									<p>
										<label for="select_MaxCol">Horizontal Monitor Count:</label><br />
										<select id="select_MaxCol" class="select-item" name="select_MaxCol"> 
											<option value="0">1</option>
											<option value="1">2</option>
											<option value="2">3</option>
											<option value="3">4</option>
											<option value="4">5</option>
											<option value="5">6</option>
											<option value="6">7</option>
											<option value="7">8</option>
											<option value="8">9</option>
											<option value="9">10</option>
											<option value="10">11</option>
											<option value="11">12</option>
											<option value="12">13</option>
											<option value="13">14</option>
											<option value="14">15</option>
											<option value="15">16</option>
										</select>
									</p>
								</td>
								<td>
									<p id="monitor_count-gf"><img src="../images/monitor_count.gif"/></p>
								</td>
							</tr>
							</table>
							<hr />
							<button id="button_vw_layout_apply">Apply</button>
						</div>
					</div>
					<div>
						<h3 id="step_basic_setup_2"><a href="#">Step 2: Setup Column Position for Each Display</a></h3>
						<div>
							<p>
								<label>Choose a Display:</label><br />
								<span>
								<button id="button_vw_install_next">Next in Column</button>
								<button id="button_vw_install_next_row">Next in Row</button>
								</span>
							</p>
							<hr />
							<p>
								<label>Change the Display's Column Setting:</label><br />
								<button id="button_vw_install_toggle_column">Change Column</button>
							</p>
						</div>
					</div>
					<div>
						<h3 id="step_basic_setup_3"><a href="#">Step 3: Bezel and Gap Compensation</a></h3>
						<div>
							<table>
							<tr>
								<td style="vertical-align: top">
									<div><label>OW:</label><br /><input type="text" id="vw_HT" value=1></input></div>
									<div><label>OH:</label><br /><input type="text" id="vw_VT" value=1></input></div>
									<div><label>VW:</label><br /><input type="text" id="vw_HA" value=1></input></div>
									<div><label>VH:</label><br /><input type="text" id="vw_VA" value=1></input></div>
								</td>
								<td>
									<div id="dimension-gf"><img src="../images/dimension.gif"/></div>
								</td>
							</tr>
							</table>
							<hr />
							<button id="button_vw_fc_apply">Apply</button>
						</div>
					</div>
				</div>

				<!-- accordion -------------------------------------------------->
				<script type="text/javascript">
					$("#accordion").accordion({
						header: "h3",
						autoHeight: false
					}).show();
				</script>

			</div>
			<div id="tabs-2">
				<div id="accordion_vw_adv" style="display:none">
					<div>
						<h3 id="setup_adv_step1"><a href="#">Step 1: Choose Control Target</a></h3>
						<div>
							<div id="target_selection">
								<link type="text/css" rel="stylesheet" href="../css/vw_target_selection.css" />
								<table id="tb_vw_adv_target_select">
								<tr>
									<td>
										<table id="tb_vw_adv_target_select_host">
										<thead><tr>
											<th><button type="button" id="btn_all_host_client">All hosts and clients</button></th>
											<th><button type="button" id="btn_all_host">All hosts</button></th>
										</tr></thead>
										<tbody id="tbody_vw_adv_target_select_host">
										<!--
										<tr>
											<td class="tb-button"><button type="button" class="button-whole-row-with-host" name="r0">All row 0 host and clients</button></td>
											<td><input type="checkbox" id="host_r0" /><label for="host_r0">R0</label></td>
										</tr>
										<tr>
											<td class="tb-button"><button type="button" class="button-whole-row-with-host" name="r1">All row 1 host and clients</button></td>
											<td><input type="checkbox" id="host_r1" /><label for="host_r1">R1</label></td>
										</tr>
										<tr>
											<td class="tb-button"><button type="button" class="button-whole-row-with-host" name="r2">All row 2 host and clients</button></td>
											<td><input type="checkbox" id="host_r2" /><label for="host_r2">R2</label></td>
										</tr>
										-->
										</tbody>
										</table>
									</td>
									<td>
										<table id="tb_vw_adv_target_select_client">
										<thead id="thead_vw_adv_target_select_client">
										<!--
										<tr>
											<th class="tb-button"><button type="button" id="btn_all_client">All clients</button></th>
											<th><button type="button" id="btn_all_c0" class="button-whole-col" name="c0">All column 0 clients</button></th>
											<th><button type="button" id="btn_all_c1" class="button-whole-col" name="c1">All column 1 clients</button></th>
											<th><button type="button" id="btn_all_c2" class="button-whole-col" name="c2">All column 2 clients</button></th>
										</tr>
										-->
										</thead>
										<tbody id="tbody_vw_adv_target_select_client">
										<!--
										<tr>
											<td class="tb-button"><button type="button" class="button-whole-row" name="r0">All row 0 clients</button></td>
											<td><input type="checkbox" id="client_r0c0" value="r0c0"/><label for="client_r0c0">r0c0</label></td>
											<td><input type="checkbox" id="client_r0c1" value="r0c1"/><label for="client_r0c1">r0c1</label></td>
											<td><input type="checkbox" id="client_r0c2" value="r0c2"/><label for="client_r0c2">r0c2</label></td>
										</tr>
										<tr>
											<td class="tb-button"><button type="button" class="button-whole-row" name="r1">All row 1 clients</button></td>
											<td><input type="checkbox" id="client_r1c0" value="r1c0"/><label for="client_r1c0">r1c0</label></td>
											<td><input type="checkbox" id="client_r1c1" value="r1c1"/><label for="client_r1c1">r1c1</label></td>
											<td><input type="checkbox" id="client_r1c2" value="r1c2"/><label for="client_r1c2">r1c2</label></td>
										</tr>
										<tr>
											<td class="tb-button"><button type="button" class="button-whole-row" name="r2">All row 2 clients</button></td>
											<td><input type="checkbox" id="client_r2c0" value="r2c0"/><label for="client_r2c0">r2c0</label></td>
											<td><input type="checkbox" id="client_r2c1" value="r2c1"/><label for="client_r2c1">r2c1</label></td>
											<td><input type="checkbox" id="client_r2c2" value="r2c2"/><label for="client_r2c2">r2c2</label></td>
										</tr>
										-->
										</tbody>
										</table>
									</td>
								</tr>
								</table>
							</div>
							<!--<hr />-->
							<p>
								<input type="checkbox" id="chkbox_vw_adv_use_r99" /><label for="chkbox_vw_adv_use_r99"> Use r99_ command for displays (Only for clients not connecting to original host)</label>
							</p>
							<hr />
							<input type="checkbox" id="button_vw_adv_show_osd" /><label for="button_vw_adv_show_osd">Show OSD</label><br />
							<!--<button id="button_vw_adv_show_osd">Show OSD</button>-->
						</div>
						<h3 id="setup_adv_step2"><a href="#">Step 2: Control Options</a></h3>
						<div id="container_vw_setup_adv_step2">
							<hr />
						<!--<div style="height: 400px;overflow-x: auto;overflow-y: auto">-->
							<p>
								<label for="text_vw_adv_reset_to_basic">Reset to Basic Setup:</label><br />
								<button id="button_vw_adv_reset_to_basic_apply" class="button-vw-adv-apply" style="float: none">Reset</button>
							</p>
							<hr />
							<p>
								<label for="select_vw_adv_MaxRow">Screen Layout (Row x Column):</label><br />
								<select id="select_vw_adv_MaxRow" class="select-item" name="select_vw_adv_MaxRow"> 
									<option value="0">1</option> 
									<option value="1">2</option> 
									<option value="2">3</option> 
									<option value="3">4</option> 
									<option value="4">5</option> 
									<option value="5">6</option> 
									<option value="6">7</option> 
									<option value="7">8</option> 
								</select>
								<label>&nbsp X &nbsp</label>
								<select id="select_vw_adv_MaxCol" class="select-item" name="select_vw_adv_MaxCol"> 
									<option value="0">1</option> 
									<option value="1">2</option> 
									<option value="2">3</option> 
									<option value="3">4</option> 
									<option value="4">5</option> 
									<option value="5">6</option> 
									<option value="6">7</option> 
									<option value="7">8</option> 
									<option value="8">9</option>
									<option value="9">10</option>
									<option value="10">11</option>
									<option value="11">12</option>
									<option value="12">13</option>
									<option value="13">14</option>
									<option value="14">15</option>
									<option value="15">16</option>
								</select>
								<button id="button_vw_adv_layout_apply" class="button-vw-adv-apply">Apply</button>
							</p>
							<hr />
							<p>
								<label for="select_vw_adv_RowNum">Row Position:</label><br />
								<select id="select_vw_adv_RowNum" class="select-item" name="select_vw_adv_RowNum"> 
									<option value="0">0</option> 
									<option value="1">1</option> 
									<option value="2">2</option> 
									<option value="3">3</option> 
									<option value="4">4</option> 
									<option value="5">5</option> 
									<option value="6">6</option> 
									<option value="7">7</option> 
								</select>
								<button id="button_vw_adv_rownum_apply" class="button-vw-adv-apply">Apply</button>
							</p>
							<hr />
							<p>
								<label for="select_vw_adv_ColNum">Column Position:</label><br />
								<select id="select_vw_adv_ColNum" class="select-item" name="select_vw_adv_ColNum"> 
									<option value="0">0</option> 
									<option value="1">1</option> 
									<option value="2">2</option> 
									<option value="3">3</option> 
									<option value="4">4</option> 
									<option value="5">5</option> 
									<option value="6">6</option> 
									<option value="7">7</option> 
									<option value="8">8</option>
									<option value="9">9</option>
									<option value="10">10</option>
									<option value="11">11</option>
									<option value="12">12</option>
									<option value="13">13</option>
									<option value="14">14</option>
									<option value="15">15</option>
								</select>
								<button id="button_vw_adv_colnum_apply" class="button-vw-adv-apply">Apply</button>
							</p>
							<hr />
							<p>
								<label for="text_vw_adv_h_shift">Horizontal Shift (N*8 pixels):</label><br />
								<span id="vw_adv_h_shift_direction" class="buttonset-pair">
								<input type="radio" id="vw_adv_h_shift_left" name="vw_adv_h_shift_direction" value="l" checked="checked"><label for="vw_adv_h_shift_left">Left</label>
								<input type="radio" id="vw_adv_h_shift_right" name="vw_adv_h_shift_direction" value="r"><label for="vw_adv_h_shift_right">Right</label>
								</span>
								<input type="text" id="text_vw_adv_h_shift" value="0">
								<button id="button_vw_adv_h_shift_apply" class="button-vw-adv-apply">Apply</button>
							</p>
							<hr />
							<p>
								<label for="text_vw_adv_v_shift">Vertical Shift (HOST:N pixels CLIENT:N*8 pixels):</label><br />
								<span id="vw_adv_v_shift_direction" class="buttonset-pair">
								<input type="radio" id="vw_adv_v_shift_up" name="vw_adv_v_shift_direction" value="u" checked="checked"><label for="vw_adv_v_shift_up">Up</label>
								<input type="radio" id="vw_adv_v_shift_down" name="vw_adv_v_shift_direction" value="d"><label for="vw_adv_v_shift_down">Down</label>
								</span>
								<input type="text" id="text_vw_adv_v_shift" value="0">
								<button id="button_vw_adv_v_shift_apply" class="button-vw-adv-apply">Apply</button>
							</p>
							<hr />
							<p>
								<label for="text_vw_adv_h_scale_up">Horizontal Scale Up (N pixels/column_count):</label><br />
								<input type="text" id="text_vw_adv_h_scale_up" value="0"> 
								<button id="button_vw_adv_h_scalue_up_apply" class="button-vw-adv-apply">Apply</button>
							</p>
							<hr />
							<p>
								<label for="text_vw_adv_v_scale_up">Vertical Scale Up (N pixels/row_count):</label><br />
								<input type="text" id="text_vw_adv_v_scale_up" value="0"> 
								<button id="button_vw_adv_v_scalue_up_apply" class="button-vw-adv-apply">Apply</button>
							</p>
							<hr />
							<p>
								<label for="text_vw_adv_delay_kick">Tearing Delay (us):</label><br />
								<input type="text" id="text_vw_adv_delay_kick" value="0"> 
								<button id="button_vw_adv_delay_kick_apply" class="button-vw-adv-apply">Apply</button>
							</p>
							<hr />
							<p>
								<label for="text_vw_adv_console_api">Console API Command:</label><br />
								<input type="text" id="text_vw_adv_console_api" value="" class="input-text-long"> 
								<button id="button_vw_adv_console_api_apply" class="button-vw-adv-apply">Apply</button>
							</p>
							<hr />
						<!--</div>-->
						</div>
					</div>
				</div>
				<!-- accordion_vw_adv -------------------------------------------------->
				<script type="text/javascript">
					$("#accordion_vw_adv").accordion({
						header: "h3",
						autoHeight: false
					})
					.show();
					//$("#setup_adv_step1").show();
					//$("#setup_adv_step2").show();
				</script>


			</div>
			<div id="tabs-3"></div>
		</div>

		<!-- Tabs -------------------------------------------------->
		<script type="text/javascript">
			$('#tabs').tabs();
			$('#tab_list').show();
		</script>


	</body>
</html>


